{"version":3,"file":"commonHelpers.js","sources":["../src/js/UnsplashAPI.js","../src/js/markup.js","../src/js/gallery.js"],"sourcesContent":["export class UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com/search/photos';\n  #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n  #query = '';\n  #searchParams = new URLSearchParams({\n    per_page: 12,\n    orientation: 'portrait',\n    client_id: this.#API_KEY\n  })\n\n  set query(newQuery){\n    this.#query = newQuery;\n  }\n\n  getPopularPhotos(page) {\n    // const url = `${\n    //   this.#BASE_URL\n    // }?page=${page}&query=popular&per_page=12&orientation=portrait&client_id=${\n    //   this.#API_KEY\n    // }`;\n    const url = `${this.#BASE_URL}?page=${page}&query=popular&${this.#searchParams}`\n    return fetch(url).then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    });\n  }\n\n  getImagesByQuery(page) {\n    // const url = `${\n    //   this.#BASE_URL\n    // }?page=${page}&query=${this.#query}&per_page=12&orientation=portrait&client_id=${\n    //   this.#API_KEY\n    // }`;\n    const url = `${this.#BASE_URL}?page=${page}&query=${this.#query}&${this.#searchParams}`\n    return fetch(url).then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    });\n  }\n}\n","export function createGalleryCard(images) {\n  return images\n    .map(\n      ({ urls, alt_description }) =>\n        `<li class='gallery__item'><img src='${urls.small}' alt='${alt_description}'></li>`\n    )\n    .join('');\n}\n","import { UnsplashAPI } from './UnsplashAPI';\nimport { createGalleryCard } from './markup';\nimport Pagination from 'tui-pagination';\nimport iziToast from 'izitoast';\nimport 'tui-pagination/dist/tui-pagination.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst galleryList = document.querySelector('.js-gallery');\nconst searchInput = document.querySelector('.search-input');\nconst loader = document.querySelector('.loader');\nconst container = document.getElementById('tui-pagination-container');\nconst options = {\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n};\n\nconst pagination = new Pagination(container, options);\nconst page = pagination.getCurrentPage();\nconst api = new UnsplashAPI();\n\nloader.classList.remove('is-hidden');\n\napi.getPopularPhotos(page).then(({ results, total }) => {\n  const markup = createGalleryCard(results);\n  galleryList.innerHTML = markup;\n  pagination.reset(total);\n}).finally(() => loader.classList.add('is-hidden'));\n\npagination.on('afterMove', fillPopularImages);\n\ndocument.querySelector('.js-search-form').addEventListener('submit', function (event) {\n  event.preventDefault();\n  const searchQuery = searchInput.value.trim();\n  if(!searchQuery){\n    iziToast.warning({ message: \"Enter search query\" });\n    return;\n  };\n\n  api.query = searchQuery;\n  pagination.off('afterMove',fillPopularImages);\n  pagination.off('afterMove',fillImagesByQuery);\n  loader.classList.remove('is-hidden');\n  api.getImagesByQuery(page).then(({ results, total }) => {\n    if (results.length === 0) {\n      iziToast.warning({ message: \"No images found.\" });\n      return;\n    }\n    galleryList.innerHTML = createGalleryCard(results);\n    pagination.reset(total);\n  }).finally(() => loader.classList.add('is-hidden'));\n  pagination.on('afterMove', fillImagesByQuery);\n})\n\nfunction fillImagesByQuery(event){\n  api.getImagesByQuery(event.page).then(({ results }) => {\n    galleryList.innerHTML = createGalleryCard(results);\n  })\n}\n\nfunction fillPopularImages(event){\n  const currentPage = event.page;\n  api.getPopularPhotos(currentPage).then(({ results }) => {\n    const markup = createGalleryCard(results);\n    galleryList.innerHTML = markup;\n  });\n}\n"],"names":["UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","_searchParams","__privateGet","newQuery","__privateSet","page","url","response","createGalleryCard","images","urls","alt_description","galleryList","searchInput","loader","container","options","pagination","Pagination","api","results","total","markup","fillPopularImages","event","searchQuery","iziToast","fillImagesByQuery","currentPage"],"mappings":"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"}