var f=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var a=(t,e,r)=>(f(t,e,"read from private field"),r?r.call(t):e.get(t)),o=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},y=(t,e,r,n)=>(f(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);import"./assets/styles-f4a030d0.js";import{P as q,i as d}from"./assets/vendor-a8d80a71.js";var c,h,u,l;class I{constructor(){o(this,c,"https://api.unsplash.com/search/photos");o(this,h,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");o(this,u,"");o(this,l,new URLSearchParams({per_page:12,orientation:"portrait",client_id:a(this,h)}))}set query(e){y(this,u,e)}getPopularPhotos(e){const r=`${a(this,c)}?page=${e}&query=popular&${a(this,l)}`;return fetch(r).then(n=>{if(!n.ok)throw new Error(n.status);return n.json()})}getImagesByQuery(e){const r=`${a(this,c)}?page=${e}&query=${a(this,u)}&${a(this,l)}`;return fetch(r).then(n=>{if(!n.ok)throw new Error(n.status);return n.json()})}}c=new WeakMap,h=new WeakMap,u=new WeakMap,l=new WeakMap;function m(t){return t.map(({urls:e,alt_description:r})=>`<li class='gallery__item'><img src='${e.small}' alt='${r}'></li>`).join("")}const p=document.querySelector(".js-gallery"),w=document.querySelector(".search-input"),g=document.querySelector(".loader"),M=document.getElementById("tui-pagination-container"),$={totalItems:0,itemsPerPage:12,visiblePages:5,page:1},s=new q(M,$),L=s.getCurrentPage(),i=new I;g.classList.remove("is-hidden");i.getPopularPhotos(L).then(({results:t,total:e})=>{const r=m(t);p.innerHTML=r,s.reset(e)}).finally(()=>g.classList.add("is-hidden"));s.on("afterMove",v);document.querySelector(".js-search-form").addEventListener("submit",function(t){t.preventDefault();const e=w.value.trim();if(!e){d.warning({message:"Enter search query"});return}i.query=e,s.off("afterMove",v),s.off("afterMove",P),g.classList.remove("is-hidden"),i.getImagesByQuery(L).then(({results:r,total:n})=>{if(r.length===0){d.warning({message:"No images found."});return}p.innerHTML=m(r),s.reset(n)}).finally(()=>g.classList.add("is-hidden")),s.on("afterMove",P)});function P(t){i.getImagesByQuery(t.page).then(({results:e})=>{p.innerHTML=m(e)})}function v(t){const e=t.page;i.getPopularPhotos(e).then(({results:r})=>{const n=m(r);p.innerHTML=n})}
//# sourceMappingURL=commonHelpers.js.map
